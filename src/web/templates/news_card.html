<div class="news-card bg-gray-800 rounded-lg p-6 mb-4 border-l-4 shadow-lg transition hover:scale-[1.01] duration-200"
     {% if news.impact_score >= 8 %} border-red-500 shadow-red-900/20
     {% elif news.impact_score >= 5 %} border-yellow-500 shadow-yellow-900/20
     {% else %} border-green-500 shadow-green-900/20 {% endif %}"
     data-news='{{ news | tojson }}'>

<div class="flex justify-between items-start">
        
        <div class="flex-1 pr-4">
            <div class="flex items-center space-x-2 text-xs text-gray-400 mb-2">
                <span class="bg-gray-700 px-2 py-1 rounded uppercase tracking-wider font-bold">
                    {{ news.source }}
                </span>
                {% if news.category == 'romania' %}
                    <span class="bg-blue-600 px-2 py-1 rounded text-white">ğŸ‡·ğŸ‡´ Romania</span>
                {% else %}
                    <span class="bg-gray-600 px-2 py-1 rounded text-white">ğŸŒ InternaÈ›ional</span>
                {% endif %}
                <span>{{ news.published_at }}</span>
            </div>

            <a href="{{ news.url }}" target="_blank" class="text-xl font-bold text-white hover:text-blue-400 transition">
                {{ news.title }}
            </a>
            
            <!-- Financial Instruments -->
            {% if news.instruments %}
            <div class="flex items-center space-x-2 mt-2">
                <span class="text-xs text-gray-500">Instrumente:</span>
                <div class="flex flex-wrap gap-1 max-w-[300px]">
                    {% for instrument in news.instruments %}
                        <span class="bg-indigo-600 px-2 py-1 rounded text-xs text-white font-mono whitespace-nowrap">
                            {{ instrument }}
                        </span>
                    {% endfor %}
                </div>
                {% if news.instruments|length > 5 %}
                <span class="text-xs text-gray-400">({{ news.instruments|length }} total)</span>
                {% endif %}
            </div>
            {% endif %}
        </div>

        <div class="flex flex-col items-end space-y-3 ml-2">
            
            {% with is_saved=news.is_saved, news_id=news.id %}
                {% include 'save_button.html' %}
            {% endwith %}

            <div class="flex flex-col items-center min-w-[60px]">
                <span class="text-3xl font-black 
                    {% if news.impact_score >= 8 %} text-red-500
                    {% elif news.impact_score >= 5 %} text-yellow-500
                    {% else %} text-green-500 {% endif %}">
                    {{ news.impact_score }}<span class="text-sm text-gray-500">/10</span>
                </span>
                <span class="text-[10px] uppercase text-gray-500 font-bold">Impact</span>
            </div>
        </div>
    </div>

    <!-- Trading Recommendation -->
    {% if news.recommendation %}
    <div class="mt-3 mb-3">
        <div class="flex items-center justify-between bg-gray-900/50 p-3 rounded-lg border border-gray-700">
            <div class="flex items-center space-x-3">
                <span class="text-sm font-medium text-gray-400">Recomandare trading:</span>
                {% if news.recommendation == 'strong_buy' %}
                    <span class="bg-green-600 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center">
                        ğŸŸ¢ğŸŸ¢ CUMPÄ‚RAT PUTERNIC
                    </span>
                {% elif news.recommendation == 'buy' %}
                    <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center">
                        ğŸŸ¢ CUMPÄ‚RAT
                    </span>
                {% elif news.recommendation == 'hold' %}
                    <span class="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center">
                        ğŸŸ¡ HOLD
                    </span>
                {% elif news.recommendation == 'sell' %}
                    <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center">
                        ğŸ”´ VÃ‚NDUT
                    </span>
                {% elif news.recommendation == 'strong_sell' %}
                    <span class="bg-red-600 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center">
                        ğŸ”´ğŸ”´ VÃ‚NDUT PUTERNIC
                    </span>
                {% endif %}
            </div>
            {% if news.confidence_score %}
                <div class="text-right">
                    <span class="text-xs text-gray-500">Ãncredere</span>
                    <span class="text-sm font-bold text-white">{{ "%.0f" | format(news.confidence_score * 100) }}%</span>
                </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <div class="mt-4 bg-gray-900/50 p-4 rounded border border-gray-700">
        <div class="flex items-center mb-2">
            <span class="text-purple-400 mr-2">ğŸ¤– AnalizÄƒ AI (Model 120b):</span>
            {% if news.is_important %}
                <span class="bg-red-600 text-white text-xs px-2 py-0.5 rounded animate-pulse">IMPORTANT</span>
            {% endif %}
            {% if news.sentiment %}
                {% if news.sentiment == 'pozitiv' %}
                    <span class="bg-green-600 text-white text-xs px-2 py-0.5 rounded ml-2">ğŸ˜Š POZITIV</span>
                {% elif news.sentiment == 'negativ' %}
                    <span class="bg-red-600 text-white text-xs px-2 py-0.5 rounded ml-2">ğŸ˜Ÿ NEGATIV</span>
                {% else %}
                    <span class="bg-gray-600 text-white text-xs px-2 py-0.5 rounded ml-2">ğŸ˜ NEUTRU</span>
                {% endif %}
            {% endif %}
        </div>
        <p class="text-gray-300 text-sm leading-relaxed">
            {{ news.summary if news.summary else news.ai_summary }}
        </p>
        
        {% if news.reasoning %}
        <div class="mt-3 pt-3 border-t border-gray-700">
            <p class="text-xs text-gray-400 italic">
                <strong>Justificare recomandare:</strong> {{ news.reasoning }}
            </p>
        </div>
        {% endif %}
        
        <!-- Additional Decision Factors -->
        <div class="mt-3 pt-3 border-t border-gray-700">
            <div class="grid grid-cols-2 gap-4 text-xs">
                <div class="bg-gray-800/50 p-2 rounded">
                    <span class="text-gray-500">Risc volatilitate:</span>
                    <span class="text-white font-bold ml-1">
                        {% if news.impact_score >= 8 %}
                            RIDICAT âš ï¸
                        {% elif news.impact_score >= 5 %}
                            MODERAT âš¡
                        {% else %}
                            SCÄ‚ZUT âœ…
                        {% endif %}
                    </span>
                </div>
                <div class="bg-gray-800/50 p-2 rounded">
                    <span class="text-gray-500">Orizont timp:</span>
                    <span class="text-white font-bold ml-1">
                        {% if news.category == 'romania' %}
                            Scurt (1-3 zile) ğŸ‡·ğŸ‡´
                        {% else %}
                            Mediu (1-2 sÄƒptÄƒmÃ¢ni) ğŸŒ
                        {% endif %}
                    </span>
                </div>
                <div class="bg-gray-800/50 p-2 rounded">
                    <span class="text-gray-500">Tip È™tire:</span>
                    <span class="text-white font-bold ml-1">
                        {% if 'earnings' in news.title.lower() or 'profit' in news.title.lower() %}
                            Financiar ğŸ’°
                        {% elif 'merger' in news.title.lower() or 'acquisition' in news.title.lower() %}
                            M&A ğŸ¤
                        {% elif 'regulation' in news.title.lower() or 'law' in news.title.lower() %}
                            Reglementar âš–ï¸
                        {% else %}
                            General ğŸ“Š
                        {% endif %}
                    </span>
                </div>
                <div class="bg-gray-800/50 p-2 rounded">
                    <span class="text-gray-500">AcÈ›iune sugeratÄƒ:</span>
                    <span class="text-white font-bold ml-1">
                        {% if news.recommendation == 'strong_buy' %}
                            CUMPÄ‚RÄ‚ ACUM ğŸš€
                        {% elif news.recommendation == 'buy' %}
                            ConsiderÄƒ CUMPÄ‚RARE ğŸ“ˆ
                        {% elif news.recommendation == 'hold' %}
                            MENÈšINE POZIÈšIA â¸ï¸
                        {% elif news.recommendation == 'sell' %}
                            CONSIDERÄ‚ VÃ‚NZARE ğŸ“‰
                        {% elif news.recommendation == 'strong_sell' %}
                            VINDE ACUM ğŸš¨
                        {% else %}
                            MONITORIZARE ğŸ‘ï¸
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
