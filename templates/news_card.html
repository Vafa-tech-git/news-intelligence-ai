<div class="news-card {% if news.impact_score >= 8 %}impact-high{% elif news.impact_score >= 5 %}impact-medium{% else %}impact-low{% endif %}"
     data-id="{{ news.id }}" data-url="{{ news.url }}" tabindex="0">

    <div class="news-card-header">
        <div class="news-card-content">
            <div class="news-card-meta">
                <span class="news-source">{{ news.source }}</span>
                <span class="news-time">{{ news.published_at }}</span>
                {% if news.sector %}
                    <span class="news-sector">{{ news.sector }}</span>
                {% endif %}
            </div>

            <a href="{{ news.url }}" target="_blank" class="news-title">
                {{ news.title }}
            </a>

            {% if news.tickers %}
            <div class="ticker-badges">
                {% for ticker in news.tickers %}
                    <span class="ticker-badge">{{ ticker }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <div class="news-card-actions">
            {% with is_saved=news.is_saved, news_id=news.id %}
                {% include 'save_button.html' %}
            {% endwith %}

            {% if news.sentiment %}
            <div class="sentiment-badge {{ news.sentiment }}" title="AI Sentiment: {{ news.sentiment }}">
                {{ news.sentiment[:1].upper() }}
            </div>
            {% endif %}

            <div class="signal-indicator {{ news.direction or 'neutral' }}">
                {% if news.direction == 'bullish' %}
                    <svg class="direction-arrow up" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 14l5-5 5 5H7z"/>
                    </svg>
                {% elif news.direction == 'bearish' %}
                    <svg class="direction-arrow down" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5H7z"/>
                    </svg>
                {% else %}
                    <svg class="direction-arrow neutral" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 12h16M4 12l4-4M4 12l4 4"/>
                    </svg>
                {% endif %}
                <span class="direction-label">{{ news.direction or 'neutral' }}</span>
            </div>

            <div class="impact-score {% if news.impact_score >= 8 %}high{% elif news.impact_score >= 5 %}medium{% else %}low{% endif %}">
                <div class="impact-value">{{ news.impact_score }}</div>
                <div class="impact-label">Impact</div>
            </div>
        </div>
    </div>

    {% if news.confidence %}
    <div class="confidence-bar-container">
        <div class="confidence-bar" style="width: {{ (news.confidence * 100)|int }}%"></div>
        <span class="confidence-label">{{ (news.confidence * 100)|int }}% confidence</span>
    </div>
    {% endif %}

    <div class="news-analysis">
        <div class="analysis-header">
            <span class="analysis-dot"></span>
            <span class="analysis-label">AI Analysis</span>
            {% if news.high_conviction %}
                <span class="badge-conviction">High Conviction</span>
            {% endif %}
            {% if news.is_important %}
                <span class="badge-important">Important</span>
            {% endif %}
        </div>
        <p class="analysis-text">
            {{ news.summary if news.summary else news.ai_summary }}
        </p>
        {% if news.catalysts %}
        <div class="catalyst-tags">
            {% for catalyst in news.catalysts %}
                <span class="catalyst-tag">{{ catalyst }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
